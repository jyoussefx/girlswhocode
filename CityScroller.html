<html>
	<head>
		<script src="http://cloud.github.com/downloads/processing-js/processing-js/processing-1.4.1.min.js"></script>
		<script type="text/processing" data-processing-target="mycanvas">
			
			
			//IT GOES ON FOREVER AFTER THIS LITTLE BREAK IT TAKES FROM CREATING BUILDINGS
			
			var scrollerList =[];
			var fiftyIncrease = 0;
			void setup(){
			  size(800,600);
			  background(125);
			  scrollerList.push(new Scroller( [255, 250, 250], 150, -200,-550, -200+fiftyIncrease, 600,  1));
			  scrollerList.push(new Scroller( [200, 200, 200], 150, -100, -400, -200+fiftyIncrease, 600,  2));
			  scrollerList.push( new Scroller( [150, 150, 175], 150, -50, -280, -200+fiftyIncrease, 600,  3));
			  
			}
	  
			  /*for(numOfBuildings; numOfBuildings<50; numOfBuildings++){
				  building.push(new Building( [255, 255, 255], 150, random(-50, -350), -200+increase50, 600,  2));
				  increase50 = increase50 +50;
				  scrollWidth= scrollWidth+150;
				  //println(numOfBuildings);
			  }
				*/

			void draw(){
			
				background(125);
				
				var x=0;
				for(x; x<scrollerList.length; x++){
					scrollerList[x].drawScroller();
					scrollerList[x].moveScroller();
				}
			 
			
			 /* var x=0;
			  background();
				for(x; x<50; x++){
					building[x].drawBuilding();
					}
				for(x=0; x<50; x++){
					building[x].moveBuilding();	
					scrollWidth = scrollWidth - 2;
					if (scrollWidth<600){
						building[x].drawBuilding();
						building[x].moveBuilding();
						 building.push(new Building( [255, 255, 255], 150, random(-50, -350), -200+increase50, 600,  2));
					}
				}
*/				
			}

			 
			  
			class Scroller{
				var height;
				var width;
				var xPosition;
				var yPosition;
				var r;
				var g; 
				var b;
				var speedX;
				var buildingList=[];
				var increase50;
				var randH1;
				var randH2;
				var totalWidth;
				
				Scroller(color, x, w1,w2,x1, y1, xSpeed){
					xPosition=x1;
					yPosition=y1;
					randH1 = w1;
					randH2 = w2;
					width = x;
					r = color[0];
					g = color[1];
					b = color[2];
					speedX = xSpeed;	
					increase50 = 0;
					totalWidth=0;
					//createScroller([r, g, b], x, y, xSpeed);
					for(var i= 0; i<50; i++){
						buildingList.push(new Building( [r, g, b], width, random(randH1,randH2), -200+increase50, 600,  speedX));
						increase50 = increase50 +50; 
						totalWidth = totalWidth+ width;
					}
				}
				/*
				void createScroller(color, width, height, speedX){
					for(var i= 0; i<50; i++){
						buildingList.push(new Building( [r, g, b], width, height, -200+increase50, 600,  speedX));
						increase50 = increase50 +50;
				  //scrollWidth= scrollWidth+150;
				  //println(numOfBuildings);
					}
				}
				*/
				void drawScroller(){				  
				  for(var x=0; x<buildingList.length; x++){
					buildingList[x].drawBuilding();
				  }
				  //println("here2");
				}
				
				void moveScroller(){
				  for(var x=0; x<buildingList.length; x++){
					buildingList[x].moveBuilding();
				  }
				  totalWidth = totalWidth-speedX;
				  if (totalWidth<800){
					buildingList.push(new Building( [r, g, b], width, random(randH1,randH2), -200+increase50, 600,  speedX));
					totalWidth= totalWidth+width;
				  }
				 }
			}
			
			class Building {
				var height;
				var width;
				var xPosition;
				var yPosition;
				var r;
				var g;
				var b;
				var speedX;
				//var originalX;
				
				Building(color, x, y, x1, y1, xSpeed){
					xPosition=x1;
					yPosition=y1;
					height = y;
					width = x;
					r = color[0];
					g = color[1];
					b = color[2];
					speedX = xSpeed;
				}
				
				void resetX(){
					xPosition=-100;
				}
				void drawBuilding(){
					noStroke();
					fill(r,g,b);
					rect(xPosition, yPosition, width, height);
				}
				
				void moveBuilding(){
					xPosition -= speedX;
					//yPosition -= speedY;	
				}
				
				int getX(){
					return xPosition;
				}
				
			}
			
		</script>
	</head>
	<body>
		<canvas id="mycanvas"></canvas>
	</body>
</html>